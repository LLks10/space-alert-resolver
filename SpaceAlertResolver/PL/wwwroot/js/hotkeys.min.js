/*! 
 * angular-hotkeys v1.7.0
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
(function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function(n){this.includeCheatSheet=!0;this.useNgRoute=n.has("ngViewDirective");this.templateTitle="Keyboard Shortcuts:";this.templateHeader=null;this.templateFooter=null;this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}<\/h4><div ng-bind-html="header" ng-if="header"><\/div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}<\/span><\/td><td class="cfp-hotkeys-text">{{ hotkey.description }}<\/td><\/tr><\/tbody><\/table><div ng-bind-html="footer" ng-if="footer"><\/div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;<\/div><\/div><\/div>';this.cheatSheetHotkey="?";this.cheatSheetDescription="Show / hide this help menu";this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(n,t,i,r,u){function k(){v=!1}function d(){v=!0}function g(n){var i={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"⏎",backspace:"⌫"},t;for(n=n.split("+"),t=0;t<n.length;t++)n[t]==="mod"&&(n[t]=r.navigator&&r.navigator.platform.indexOf("Mac")>=0?"command":"ctrl"),n[t]=i[n[t]]||n[t];return n.join(" + ")}function y(n,t,i,r,u,f){this.combo=n instanceof Array?n:[n];this.description=t;this.callback=i;this.action=r;this.allowIn=u;this.persistent=f;this._formated=null}function b(){for(var t=f.hotkeys.length,n;t--;)n=f.hotkeys[t],n&&!n.persistent&&s(n)}function l(){f.helpVisible=!f.helpVisible;f.helpVisible?(h=a("esc"),s("esc"),o("esc",h.description,l,null,["INPUT","SELECT","TEXTAREA"])):(s("esc"),h!==!1&&o(h))}function o(n,t,i,r,u,e){var a,h=["INPUT","SELECT","TEXTAREA"],v=Object.prototype.toString.call(n),c,o,l;if(v==="[object Object]"&&(t=n.description,i=n.callback,r=n.action,e=n.persistent,u=n.allowIn,n=n.combo),s(n),t instanceof Function?(r=i,i=t,t="$$undefined$$"):angular.isUndefined(t)&&(t="$$undefined$$"),e===undefined&&(e=!0),typeof i=="function"){for(a=i,u instanceof Array||(u=[]),o=0;o<u.length;o++)u[o]=u[o].toUpperCase(),c=h.indexOf(u[o]),c!==-1&&h.splice(c,1);i=function(n){var i=!0,r,u,t;if(n)if(r=n.target||n.srcElement,u=r.nodeName.toUpperCase(),(" "+r.className+" ").indexOf(" mousetrap ")>-1)i=!0;else for(t=0;t<h.length;t++)if(h[t]===u){i=!1;break}i&&w(a.apply(this,arguments))}}return typeof r=="string"?Mousetrap.bind(n,w(i),r):Mousetrap.bind(n,w(i)),l=new y(n,t,i,r,u,e),f.hotkeys.push(l),l}function s(n){var i=n instanceof y?n.combo:n,r,u,t;if(Mousetrap.unbind(i),angular.isArray(i)){for(r=!0,u=i.length;u--;)r=s(i[u])&&r;return r}return(t=f.hotkeys.indexOf(a(i)),t>-1)?(f.hotkeys[t].combo.length>1?f.hotkeys[t].combo.splice(f.hotkeys[t].combo.indexOf(i),1):(angular.forEach(e,function(n){var i=n.indexOf(f.hotkeys[t]);i!==-1&&n.splice(i,1)}),f.hotkeys.splice(t,1)),!0):!1}function a(n){var i,t;if(!n)return f.hotkeys;for(t=0;t<f.hotkeys.length;t++)if(i=f.hotkeys[t],i.combo.indexOf(n)>-1)return i;return!1}function tt(n){return n.$id in e||(e[n.$id]=[],n.$on("$destroy",function(){for(var t=e[n.$id].length;t--;)s(e[n.$id].pop())})),{add:function(t){var i;return i=arguments.length>1?o.apply(this,arguments):o(t),e[n.$id].push(i),this}}}function w(n){return function(i,r){if(n instanceof Array){var u=n[0],f=n[1];n=function(){f.scope.$eval(u)}}t.$apply(function(){n(i,a(r))})}}var v=!0,f,e,h;if(Mousetrap.prototype.stopCallback=function(n,t){return v?(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:t.contentEditable&&t.contentEditable=="true":!0},y.prototype.format=function(){var i,n,t;if(this._formated===null){for(i=this.combo[0],n=i.split(/[\s]/),t=0;t<n.length;t++)n[t]=g(n[t]);this._formated=n}return this._formated},f=t.$new(),f.hotkeys=[],f.helpVisible=!1,f.title=this.templateTitle,f.header=this.templateHeader,f.footer=this.templateFooter,f.toggleCheatSheet=l,e={},this.useNgRoute&&t.$on("$routeChangeSuccess",function(n,t){b();t&&t.hotkeys&&angular.forEach(t.hotkeys,function(n){var i=n[2];(typeof i=="string"||i instanceof String)&&(n[2]=[i,t]);n[5]=!1;o.apply(this,n)})}),this.includeCheatSheet){var p=u[0],c=n[0],nt=angular.element(this.template);o(this.cheatSheetHotkey,this.cheatSheetDescription,l);(c===p||c===p.documentElement)&&(c=p.body);angular.element(c).append(i(nt)(f))}return h=!1,{add:o,del:s,get:a,bindTo:tt,template:this.template,toggleCheatSheet:l,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:b,templateTitle:this.templateTitle,pause:k,unpause:d}}]}]).directive("hotkey",["hotkeys",function(n){return{restrict:"A",link:function(t,i,r){var u=[],f;angular.forEach(t.$eval(r.hotkey),function(t,i){f=typeof r.hotkeyAllowIn=="string"?r.hotkeyAllowIn.split(/[\s,]+/):[];u.push(i);n.add({combo:i,description:r.hotkeyDescription,callback:t,action:r.hotkeyAction,allowIn:f})});i.bind("$destroy",function(){angular.forEach(u,n.del)})}}}]).run(["hotkeys",function(){}])})(),function(n,t){function e(n,t,i){if(n.addEventListener){n.addEventListener(t,i,!1);return}n.attachEvent("on"+t,i)}function l(n){if(n.type=="keypress"){var t=String.fromCharCode(n.which);return n.shiftKey||(t=t.toLowerCase()),t}return u[n.which]?u[n.which]:s[n.which]?s[n.which]:String.fromCharCode(n.which).toLowerCase()}function y(n,t){return n.sort().join(",")===t.sort().join(",")}function p(n){var t=[];return n.shiftKey&&t.push("shift"),n.altKey&&t.push("alt"),n.ctrlKey&&t.push("ctrl"),n.metaKey&&t.push("meta"),t}function w(n){if(n.preventDefault){n.preventDefault();return}n.returnValue=!1}function b(n){if(n.stopPropagation){n.stopPropagation();return}n.cancelBubble=!0}function o(n){return n=="shift"||n=="ctrl"||n=="alt"||n=="meta"}function k(){if(!f){f={};for(var n in u)n>95&&n<112||u.hasOwnProperty(n)&&(f[u[n]]=n)}return f}function d(n,t,i){return i||(i=k()[n]?"keydown":"keypress"),i=="keypress"&&t.length&&(i="keydown"),i}function g(n){return n==="+"?["+"]:(n=n.replace(/\+{2}/g,"+plus"),n.split("+"))}function a(n,t){for(var i,u=[],f=g(n),r=0;r<f.length;++r)i=f[r],c[i]&&(i=c[i]),t&&t!="keypress"&&h[i]&&(i=h[i],u.push("shift")),o(i)&&u.push(i);return t=d(i,u,t),{key:i,modifiers:u,action:t}}function v(n,i){return n===t?!1:n===i?!0:v(n.parentNode,i)}function i(n){function h(n){n=n||{};var t=!1;for(var i in u){if(n[i]){t=!0;continue}u[i]=0}t||(s=!1)}function g(n,t,i,f,e,s){var c,h,a=[],l=i.type,v,p;if(!r._callbacks[n])return[];for(l=="keyup"&&o(n)&&(t=[n]),c=0;c<r._callbacks[n].length;++c)(h=r._callbacks[n][c],f||!h.seq||u[h.seq]==h.level)&&l==h.action&&((l!="keypress"||i.metaKey||i.ctrlKey)&&!y(t,h.modifiers)||(v=!f&&h.combo==e,p=f&&h.seq==f&&h.level==s,(v||p)&&r._callbacks[n].splice(c,1),a.push(h)));return a}function c(n,t,i,u){r.stopCallback(t,t.target||t.srcElement,i,u)||n(t,i)===!1&&(w(t),b(t))}function v(n){typeof n.which!="number"&&(n.which=n.keyCode);var t=l(n);if(t){if(n.type=="keyup"&&f===t){f=!1;return}r.handleKey(t,p(n),n)}}function tt(){clearTimeout(k);k=setTimeout(h,1e3)}function it(n,t,i,r){function y(t){return function(){s=t;++u[n];tt()}}function p(t){c(i,t,n);r!=="keyup"&&(f=l(t));setTimeout(h,10)}var e,o,v;for(u[n]=0,e=0;e<t.length;++e)o=e+1===t.length,v=o?p:y(r||a(t[e+1]).action),nt(t[e],v,r,n,e)}function nt(n,t,i,u,f){r._directMap[n+":"+i]=t;n=n.replace(/\s+/g," ");var o=n.split(" "),e;if(o.length>1){it(n,o,t,i);return}e=a(n,i);r._callbacks[e.key]=r._callbacks[e.key]||[];g(e.key,e.modifiers,{type:e.action},u,n,f);r._callbacks[e.key][u?"unshift":"push"]({callback:t,modifiers:e.modifiers,action:e.action,seq:u,level:f,combo:n})}var r=this;if(n=n||t,!(r instanceof i))return new i(n);r.target=n;r._callbacks={};r._directMap={};var u={},k,f=!1,d=!1,s=!1;r._handleKey=function(n,t,i){for(var u=g(n,t,i),l={},f=0,e=!1,a,r=0;r<u.length;++r)u[r].seq&&(f=Math.max(f,u[r].level));for(r=0;r<u.length;++r){if(u[r].seq){if(u[r].level!=f)continue;e=!0;l[u[r].seq]=1;c(u[r].callback,i,u[r].combo,u[r].seq);continue}e||c(u[r].callback,i,u[r].combo)}a=i.type=="keypress"&&d;i.type!=s||o(n)||a||h(l);d=e&&i.type=="keydown"};r._bindMultiple=function(n,t,i){for(var r=0;r<n.length;++r)nt(n[r],t,i)};e(n,"keypress",v);e(n,"keydown",v);e(n,"keyup",v)}for(var u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f,r=1;r<20;++r)u[111+r]="f"+r;for(r=0;r<=9;++r)u[r+96]=r;i.prototype.bind=function(n,t,i){var r=this;return n=n instanceof Array?n:[n],r._bindMultiple.call(r,n,t,i),r};i.prototype.unbind=function(n,t){var i=this;return i.bind.call(i,n,function(){},t)};i.prototype.trigger=function(n,t){var i=this;return i._directMap[n+":"+t]&&i._directMap[n+":"+t]({},n),i};i.prototype.reset=function(){var n=this;return n._callbacks={},n._directMap={},n};i.prototype.stopCallback=function(n,t){var i=this;return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:v(t,i.target)?!1:t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"||t.isContentEditable};i.prototype.handleKey=function(){var n=this;return n._handleKey.apply(n,arguments)};i.init=function(){var n=i(t);for(var r in n)r.charAt(0)!=="_"&&(i[r]=function(t){return function(){return n[t].apply(n,arguments)}}(r))};i.init();n.Mousetrap=i;typeof module!="undefined"&&module.exports&&(module.exports=i);typeof define=="function"&&define.amd&&define(function(){return i})}(window,document);