<div class="game-sidebar">
	<div class="btn-group automated-run-through">
		<div class="btn btn-default" ng-click="goToStart()"><i class="fa fa-fast-backward"></i></div>
		<div class="btn btn-default" ng-click="goBackOnePhase()"><i class="fa fa-backward"></i></div>
		<div class="btn btn-default" ng-click="playPause()">
			<i ng-class="{'fa-play': !playing, 'fa-pause': playing}" class="fa"></i>
		</div>
		<div class="btn btn-default" ng-click="goForwardOnePhase()"><i class="fa fa-forward"></i></div>
		<div class="btn btn-default" ng-click="goToEnd()"><i class="fa fa-fast-forward"></i></div>
	</div>
	<div class="speed-selection-container">
		<input class="speed-selector" type="range" ng-model="turnsPerTwoSeconds" min="1" max="10"/>
		<div class="speed-selection-labels-container">
			<span class="slow-speed-label">Slow</span>
			<span class="fast-speed-label">Fast</span>
		</div>
	</div>
	<div class="btn-group turn-selector">
		<div ng-repeat="turn in gameData" class="btn btn-default turn-selector-option" ng-model="currentTurnIndex" ng-model-options="{ getterSetter: true }" uib-btn-radio="$index">{{$index + 1}}</div>
	</div>
	<div>
		<div class="btn-group btn-group-vertical phase-selector">
			<div ng-repeat="phase in currentTurn" ng-if="!phase.isSubPhase" class="btn btn-default phase-selector-option" ng-model="currentPhaseIndex" ng-model-options="{ getterSetter: true }" uib-btn-radio="$index">
				<div>{{phase.phaseDescription}}</div>
				<div>{{phase.phaseSubDescription}}</div>
			</div>
		</div>
	</div>
	<div>
		<h3>Damage</h3>
		<table class="table table-condensed">
			<tr>
				<th>Red</th>
				<th>White</th>
				<th>Blue</th>
			</tr>
			<tr>
				<td ng-class="{'danger': currentPhase.redZone.totalDamage > 6}">{{currentPhase.redZone.totalDamage}}</td>
				<td ng-class="{'danger': currentPhase.whiteZone.totalDamage > 6}">{{currentPhase.whiteZone.totalDamage}}</td>
				<td ng-class="{'danger': currentPhase.blueZone.totalDamage > 6}">{{currentPhase.blueZone.totalDamage}}</td>
			</tr>
		</table>
		<dl>
			<dt>Game Status</dt>
			<dd>{{currentPhase.gameStatus}}</dd>
			<dt ng-if="currentPhase.killedBy != null">Killed By</dt>
			<dd ng-if="currentPhase.killedBy != null">{{currentPhase.killedBy}}</dd>
		</dl>
		<div ng-if="currentPhase.defeatedThreats.length > 0">
			<h3>Defeated Threats</h3>
			<table class="table table-condensed">
				<tr>
					<th>Threat</th>
					<th>Points</th>
				</tr>
				<tr ng-repeat="threat in currentPhase.defeatedThreats">
					<td>{{threat.displayName}}</td>
					<td>{{threat.points}}</td>
				</tr>
				<tr>
					<td>Total</td>
					<td>{{currentPhase.totalDefeatedPoints}}</td>
				</tr>
			</table>
		</div>
		<div ng-if="currentPhase.survivedThreats.length > 0">
			<h3>Survived Threats</h3>
			<table class="table table-condensed">
				<tr>
					<th>Threat</th>
					<th>Points</th>
				</tr>
				<tr ng-repeat="threat in currentPhase.survivedThreats">
					<td>{{threat.displayName}}</td>
					<td>{{threat.points}}</td>
				</tr>
				<tr>
					<td>Total</td>
					<td>{{currentPhase.totalSurvivedPoints}}</td>
				</tr>
			</table>
		</div>
		<div ng-if="currentPhase.knockedOutPlayers">
			<h3>Knocked Out Players</h3>
			<div ng-repeat="player in currentPhase.knockedOutPlayers">{{player.playerColor}}</div>
		</div>
	</div>
</div>
<div class="full-board">
	<div class="external-tracks-wrapper">
		<track-with-threats track="currentPhase.redZone.track" threats="currentPhase.redZone.externalThreats" track-id="'red'"></track-with-threats>
		<track-with-threats track="currentPhase.whiteZone.track" threats="currentPhase.whiteZone.externalThreats" track-id="'white'"></track-with-threats>
		<track-with-threats track="currentPhase.blueZone.track" threats="currentPhase.blueZone.externalThreats" track-id="'blue'"></track-with-threats>
		<div class="interceptors-zone">
			<div class="interceptors-station interceptors-station-3">
				<img ng-repeat="player in currentPhase.interceptorsZone.interceptorsStation3.players" class="interceptors-in-space" ng-src="~/Content/Images/Interceptors{{player.playerColor}}.png" />
				<img ng-if="currentPhase.interceptorsZone.interceptorsStation3.players.length == 0" class="interceptors-in-space interceptors-in-space-placeholder" ng-src="~/Content/Images/Interceptors.png" />
			</div>
			<div class="interceptors-station interceptors-station-2">
				<img ng-repeat="player in currentPhase.interceptorsZone.interceptorsStation2.players" class="interceptors-in-space interceptors-in-space-2" ng-src="~/Content/Images/Interceptors{{player.playerColor}}.png" />
				<img ng-if="currentPhase.interceptorsZone.interceptorsStation2.players.length == 0" class="interceptors-in-space interceptors-in-space-placeholder" ng-src="~/Content/Images/Interceptors.png" />
			</div>
			<div class="interceptors-station interceptors-station-1">
				<img ng-repeat="player in currentPhase.interceptorsZone.interceptorsStation1.players" class="interceptors-in-space interceptors-in-space-1" ng-src="~/Content/Images/Interceptors{{player.playerColor}}.png" />
				<img ng-if="currentPhase.interceptorsZone.interceptorsStation1.players.length == 0" class="interceptors-in-space interceptors-in-space-placeholder" ng-src="~/Content/Images/Interceptors.png" />
			</div>
		</div>
	</div>
	<div class="sitting-duck-wrapper">
		<img class="sitting-duck" src="~/Content/Images/board-front.jpg"/>
		<standard-zone zone="currentPhase.whiteZone" zone-id="'white'"></standard-zone>
		<standard-zone zone="currentPhase.redZone" zone-id="'red'"></standard-zone>
		<standard-zone zone="currentPhase.blueZone" zone-id="'blue'"></standard-zone>
	</div>
	<track-with-threats track="currentPhase.internalTrack" threats="currentPhase.internalThreats" track-id="'internal'"></track-with-threats>
</div>
<div class="player-boards">
	<div class="player-board" ng-repeat="player in currentPhase.players">
		<player-board player-color="player.playerColor" selected-actions="player.actions" small-board="true" immutable-cursor="true" cursor="{index: getActionCursor()}"></player-board>
	</div>
</div>

<script type="text/ng-template" id="templates/standardZone">
	@Html.Action("StandardZone", "Templates")
</script>

<script type="text/ng-template" id="templates/trackWithThreats">
	@Html.Action("TrackWithThreats", "Templates")
</script>
