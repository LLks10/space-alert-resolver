<div class="game-sidebar">
	<div class="btn-group automated-run-through">
		<div class="btn btn-default" ng-click="goToStart()"><i class="fa fa-fast-backward"></i></div>
		<div class="btn btn-default" ng-click="goBackOnePhase()"><i class="fa fa-backward"></i></div>
		<div class="btn btn-default" ng-click="playPause()">
			<i ng-class="{'fa-play': !playing, 'fa-pause': playing}" class="fa"></i>
		</div>
		<div class="btn btn-default" ng-click="goForwardOnePhase()"><i class="fa fa-forward"></i></div>
		<div class="btn btn-default" ng-click="goToEnd()"><i class="fa fa-fast-forward"></i></div>
	</div>
	<div class="speed-selection-container">
		<input class="speed-selector" type="range" ng-model="turnsPerTwoSeconds" min="1" max="10"/>
		<div class="speed-selection-labels-container">
			<span class="slow-speed-label">Slow</span>
			<span class="fast-speed-label">Fast</span>
		</div>
	</div>
	<div>
		<uib-accordion>
			<div uib-accordion-group ng-repeat="turn in gameData" ng-class="{'panel-primary': turn.isSelected, 'panel-default': !turn.isSelected}" heading="{{$index + 1}}" is-open="turn.isSelected">
				<uib-accordion>
					<div uib-accordion-group ng-repeat="phase in currentTurn.phases" ng-class="{'panel-primary': phase.isSelected, 'panel-default': !phase.isSelected}" heading="{{phase.description}}" is-open="phase.isSelected">
						<div>
							<div ng-repeat="subPhase in phase.subPhases" class="btn" ng-class="{'btn-primary': subPhase.isSelected, 'btn-default': !subPhase.isSelected}">{{subPhase.phaseDescription}}</div>
						</div>
					</div>
				</uib-accordion>
			</div>
		</uib-accordion>
	</div>
	<div>
		<h3>Damage</h3>
		<table class="table table-condensed">
			<tr>
				<th>Red</th>
				<th>White</th>
				<th>Blue</th>
			</tr>
			<tr>
				<td ng-class="{'danger': currentSubPhase.redZone.totalDamage > 6}">{{currentSubPhase.redZone.totalDamage}}</td>
				<td ng-class="{'danger': currentSubPhase.whiteZone.totalDamage > 6}">{{currentSubPhase.whiteZone.totalDamage}}</td>
				<td ng-class="{'danger': currentSubPhase.blueZone.totalDamage > 6}">{{currentSubPhase.blueZone.totalDamage}}</td>
			</tr>
		</table>
		<dl>
			<dt>Game Status</dt>
			<dd>{{currentSubPhase.gameStatus}}</dd>
			<dt ng-if="currentSubPhase.killedBy != null">Killed By</dt>
			<dd ng-if="currentSubPhase.killedBy != null">{{currentSubPhase.killedBy}}</dd>
		</dl>
		<div ng-if="currentSubPhase.defeatedThreats.length > 0">
			<h3>Defeated Threats</h3>
			<table class="table table-condensed">
				<tr>
					<th>Threat</th>
					<th>Points</th>
				</tr>
				<tr ng-repeat="threat in currentSubPhase.defeatedThreats">
					<td>{{threat.displayName}}</td>
					<td>{{threat.points}}</td>
				</tr>
				<tr>
					<td>Total</td>
					<td>{{currentSubPhase.totalDefeatedPoints}}</td>
				</tr>
			</table>
		</div>
		<div ng-if="currentSubPhase.survivedThreats.length > 0">
			<h3>Survived Threats</h3>
			<table class="table table-condensed">
				<tr>
					<th>Threat</th>
					<th>Points</th>
				</tr>
				<tr ng-repeat="threat in currentSubPhase.survivedThreats">
					<td>{{threat.displayName}}</td>
					<td>{{threat.points}}</td>
				</tr>
				<tr>
					<td>Total</td>
					<td>{{currentSubPhase.totalSurvivedPoints}}</td>
				</tr>
			</table>
		</div>
		<div ng-if="currentSubPhase.knockedOutPlayers">
			<h3>Knocked Out Players</h3>
			<div ng-repeat="player in currentSubPhase.knockedOutPlayers">{{player.playerColor}}</div>
		</div>
	</div>
</div>
<div class="full-board">
	<div class="external-tracks-wrapper">
		<track-with-threats track="currentSubPhase.redZone.track" threats="currentSubPhase.redZone.externalThreats" track-id="'red'"></track-with-threats>
		<track-with-threats track="currentSubPhase.whiteZone.track" threats="currentSubPhase.whiteZone.externalThreats" track-id="'white'"></track-with-threats>
		<track-with-threats track="currentSubPhase.blueZone.track" threats="currentSubPhase.blueZone.externalThreats" track-id="'blue'"></track-with-threats>
		<div class="interceptors-zone">
			<div class="interceptors-station interceptors-station-3">
				<img ng-repeat="player in currentSubPhase.interceptorsZone.interceptorsStation3.players" class="interceptors-in-space" ng-src="~/Content/Images/Interceptors{{player.playerColor}}.png" />
				<img ng-if="currentSubPhase.interceptorsZone.interceptorsStation3.players.length == 0" class="interceptors-in-space interceptors-in-space-placeholder" ng-src="~/Content/Images/Interceptors.png" />
			</div>
			<div class="interceptors-station interceptors-station-2">
				<img ng-repeat="player in currentSubPhase.interceptorsZone.interceptorsStation2.players" class="interceptors-in-space interceptors-in-space-2" ng-src="~/Content/Images/Interceptors{{player.playerColor}}.png" />
				<img ng-if="currentSubPhase.interceptorsZone.interceptorsStation2.players.length == 0" class="interceptors-in-space interceptors-in-space-placeholder" ng-src="~/Content/Images/Interceptors.png" />
			</div>
			<div class="interceptors-station interceptors-station-1">
				<img ng-repeat="player in currentSubPhase.interceptorsZone.interceptorsStation1.players" class="interceptors-in-space interceptors-in-space-1" ng-src="~/Content/Images/Interceptors{{player.playerColor}}.png" />
				<img ng-if="currentSubPhase.interceptorsZone.interceptorsStation1.players.length == 0" class="interceptors-in-space interceptors-in-space-placeholder" ng-src="~/Content/Images/Interceptors.png" />
			</div>
		</div>
	</div>
	<div class="sitting-duck-wrapper">
		<img class="sitting-duck" src="~/Content/Images/board-front.jpg"/>
		<standard-zone zone="currentSubPhase.whiteZone" zone-id="'white'"></standard-zone>
		<standard-zone zone="currentSubPhase.redZone" zone-id="'red'"></standard-zone>
		<standard-zone zone="currentSubPhase.blueZone" zone-id="'blue'"></standard-zone>
	</div>
	<track-with-threats track="currentSubPhase.internalTrack" threats="currentSubPhase.internalThreats" track-id="'internal'"></track-with-threats>
</div>
<div class="player-boards">
	<div class="player-board" ng-repeat="player in currentSubPhase.players">
		<player-board player-color="player.playerColor" selected-actions="player.actions" small-board="true" immutable-cursor="true" cursor="{index: getActionCursor()}"></player-board>
	</div>
</div>

<script type="text/ng-template" id="templates/standardZone">
	@Html.Action("StandardZone", "Templates")
</script>

<script type="text/ng-template" id="templates/trackWithThreats">
	@Html.Action("TrackWithThreats", "Templates")
</script>
